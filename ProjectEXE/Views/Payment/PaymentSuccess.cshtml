@model ProjectEXE.ViewModel.ServicePackages.PaymentResultInformation

@{
    ViewData["Title"] = "Thanh toán thành công - REVA";
}

@section Styles {
    <link rel="stylesheet" href="~/css/payment-status.css?v=@DateTime.Now.Ticks" />
}

<div class="payment-page payment-success-page">
    <!-- Confetti Animation -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Floating Success Elements -->
    <div class="floating-success">⭐</div>
    <div class="floating-success">✨</div>
    <div class="floating-success">🎉</div>

    <div class="container-custom">
        <!-- Main Card -->
        <div class="main-card">
            <!-- Card Header -->
            <div class="card-header">
                <div class="status-icon">
                    <i class="fas fa-check"></i>
                </div>
                <h1 class="main-title">Thanh toán thành công!</h1>
                <p class="main-subtitle">
                    Chúc mừng! Bạn đã đăng ký gói dịch vụ thành công.<br>
                    Shop của bạn đã được kích hoạt và sẵn sàng hoạt động!
                </p>
                <div class="celebration-badge">
                    <i class="fas fa-trophy"></i>
                    Chào mừng bạn đến với REVA!
                </div>
            </div>

            <!-- Card Body -->
            <div class="card-body">
                <!-- Activation Alert -->
                <div class="activation-alert">
                    <div class="alert-icon">🚀</div>
                    <div class="alert-title">Shop đã được kích hoạt!</div>
                    <p class="alert-message">
                        Gói dịch vụ của bạn đã có hiệu lực ngay lập tức.
                        Bạn có thể bắt đầu đăng bán sản phẩm và quản lý shop ngay bây giờ!
                    </p>
                </div>

                <!-- Package Showcase -->
                <div class="package-showcase">
                    <div class="package-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="package-name">Shop Xịn Sò</div>

                    <div class="package-benefits">
                        <div class="benefit-item">
                            <div class="benefit-icon">📦</div>
                            <div class="benefit-text">@Model.ProductLimit</div>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">⚡</div>
                            <div class="benefit-text">Kích hoạt ngay</div>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">🎯</div>
                            <div class="benefit-text">Hỗ trợ 24/7</div>
                        </div>
                        <div class="benefit-item">
                            <div class="benefit-icon">🏆</div>
                            <div class="benefit-text">Ưu tiên hiển thị</div>
                        </div>
                    </div>
                </div>

                <!-- Information Grid -->
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-receipt"></i>
                            Mã giao dịch
                        </div>
                        <div class="info-value">
                            <span class="transaction-code">@Model.TransactionCode</span>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-tag"></i>
                            Gói dịch vụ
                        </div>
                        <div class="info-value">@Model.PackageName</div>
                    </div>
                    @{
                        var price = Model.Price;
                        var discountedPrice = Model.DiscountedPrice ?? 0;

                        var discountPercent = 0;
                        if (price > 0 && discountedPrice < price)
                        {
                            discountPercent = (int)Math.Round((1 - (discountedPrice / price)) * 100);
                        }
                    }
                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-money-bill-wave"></i>
                            Số tiền đã thanh toán
                        </div>
                        <div class="info-value">
                            <span class="amount-display">@Model.DiscountedPrice?.ToString("N0")₫</span>
                            <span class="original-price">@Model.Price.ToString("N0")₫</span>
                            @if (discountPercent > 0)
                            {
                                <span class="discount-badge">Tiết kiệm @discountPercent%</span>
                            }
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-calendar-check"></i>
                            Ngày kích hoạt
                        </div>
                        <div class="info-value">@Model.CreatedDate?.ToString("dd/MM/yyyy HH:mm")</div>
                    </div>

                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-calendar-times"></i>
                            Ngày hết hạn
                        </div>
                        <div class="info-value">@Model.ExpiredDate?.ToString("dd/MM/yyyy HH:mm")</div>
                    </div>

                    <div class="info-item">
                        <div class="info-label">
                            <i class="fas fa-flag"></i>
                            Trạng thái
                        </div>
                        <div class="info-value">
                            <span class="status-badge">
                                <i class="fas fa-check-circle"></i>
                                Đã thanh toán
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Next Steps -->
                <div class="next-steps">
                    <h3 class="next-steps-title">
                        <i class="fas fa-route me-2"></i>
                        Bước tiếp theo để bắt đầu bán hàng
                    </h3>

                    <div class="steps-grid">
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <div class="step-title">Hoàn thiện thông tin shop</div>
                            <div class="step-description">
                                Cập nhật avatar, mô tả và thông tin liên hệ để khách hàng tin tưởng hơn
                            </div>
                        </div>

                        <div class="step-item">
                            <div class="step-number">2</div>
                            <div class="step-title">Đăng sản phẩm đầu tiên</div>
                            <div class="step-description">
                                Thêm ảnh đẹp, mô tả chi tiết và định giá hợp lý cho sản phẩm
                            </div>
                        </div>

                        <div class="step-item">
                            <div class="step-number">3</div>
                            <div class="step-title">Tương tác với khách hàng</div>
                            <div class="step-description">
                                Trả lời tin nhắn nhanh chóng và xử lý đơn hàng một cách chuyên nghiệp
                            </div>
                        </div>

                        <div class="step-item">
                            <div class="step-number">4</div>
                            <div class="step-title">Theo dõi và phát triển</div>
                            <div class="step-description">
                                Sử dụng dashboard để theo dõi doanh thu và tối ưu hóa hiệu quả bán hàng
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Confetti animation
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            if (!container) return;

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(confetti);
            }

            // Remove confetti after animation
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        // Copy transaction code
        document.querySelector('.transaction-code')?.addEventListener('click', function() {
            navigator.clipboard.writeText(this.textContent).then(() => {
                const original = this.textContent;
                this.textContent = 'Đã sao chép!';
                setTimeout(() => {
                    this.textContent = original;
                }, 1500);
            });
        });

        // Start confetti on page load
        window.addEventListener('load', createConfetti);
    </script>
}