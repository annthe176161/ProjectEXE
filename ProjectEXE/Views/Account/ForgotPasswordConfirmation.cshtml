@{
    ViewData["Title"] = "Xác nhận yêu cầu đặt lại mật khẩu";
}

@section Styles {
    <link rel="stylesheet" href="~/css/password-reset-confirmation.css?v=@DateTime.Now.Ticks" />
}

<div class="password-reset-page">
    <div class="container">
        <div class="reset-wrapper">
            <div class="row justify-content-center">
                <div class="col-lg-5 col-md-6 col-sm-8">
                    <div class="reset-card">
                        <!-- Email Animation -->
                        <div class="email-animation">
                            <div class="email-container">
                                <div class="email-envelope">
                                    <div class="email-lid"></div>
                                    <div class="email-body"></div>
                                    <div class="email-letter">
                                        <i class="fas fa-key"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Header -->
                        <div class="reset-header">
                            <div class="header-icon">
                                <i class="fas fa-envelope-open-text"></i>
                            </div>
                            <h3>Kiểm tra email của bạn</h3>
                            <p class="header-subtitle">Liên kết đặt lại mật khẩu đã được gửi</p>
                        </div>

                        <!-- Card Body -->
                        <div class="reset-body">
                            <div class="message-content">
                                <div class="main-message">
                                    <h4>📧 Đã gửi liên kết đặt lại mật khẩu</h4>
                                    <p>Nếu email của bạn tồn tại trong hệ thống, chúng tôi đã gửi hướng dẫn đặt lại mật khẩu đến địa chỉ email đó.</p>
                                </div>

                                <div class="instructions">
                                    <div class="instruction-item">
                                        <div class="step-number">1</div>
                                        <div class="step-content">
                                            <strong>Kiểm tra hộp thư</strong>
                                            <span>Bao gồm cả thư mục spam/junk</span>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="step-number">2</div>
                                        <div class="step-content">
                                            <strong>Nhấp vào liên kết</strong>
                                            <span>Trong email chúng tôi đã gửi</span>
                                        </div>
                                    </div>
                                    <div class="instruction-item">
                                        <div class="step-number">3</div>
                                        <div class="step-content">
                                            <strong>Tạo mật khẩu mới</strong>
                                            <span>Và hoàn tất quá trình</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="important-note">
                                    <div class="note-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="note-content">
                                        <strong>Lưu ý quan trọng:</strong>
                                        <p>Liên kết đặt lại mật khẩu sẽ hết hạn sau <strong>24 giờ</strong> để đảm bảo bảo mật.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Footer -->
                        <div class="reset-footer">
                            <a asp-action="Login" class="btn btn-primary">
                                <i class="fas fa-arrow-left"></i>
                                Quay lại trang đăng nhập
                            </a>

                            <div class="help-section">
                                <p class="help-text">Không nhận được email?</p>
                                <div class="help-actions">
                                    <a href="#" class="help-link" onclick="resendEmail()">
                                        <i class="fas fa-redo"></i>
                                        Gửi lại
                                    </a>
                                    <span class="divider">•</span>
                                    <a href="#" class="help-link">
                                        <i class="fas fa-question-circle"></i>
                                        Trợ giúp
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Tips -->
                    <div class="tips-section">
                        <div class="tip-card">
                            <div class="tip-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="tip-content">
                                <h6>Mẹo bảo mật</h6>
                                <p>Chọn mật khẩu mạnh với ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường, số và ký tự đặc biệt.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Animation and interaction handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Trigger animations
            setTimeout(function() {
                document.querySelector('.reset-card').classList.add('animate');
                document.querySelector('.email-animation').classList.add('animate');
            }, 300);
        });

        // Resend email function
        function resendEmail() {
            const btn = event.target.closest('.help-link');
            const originalText = btn.innerHTML;

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang gửi...';
            btn.style.pointerEvents = 'none';

            // Simulate API call
            setTimeout(function() {
                btn.innerHTML = '<i class="fas fa-check"></i> Đã gửi lại';
                setTimeout(function() {
                    btn.innerHTML = originalText;
                    btn.style.pointerEvents = 'auto';
                }, 2000);
            }, 2000);
        }
    </script>
}